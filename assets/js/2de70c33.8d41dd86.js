"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8],{6049:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>c});var t=i(4848),s=i(5680);const l={sidebar_position:2,id:"Unix Installation",title:"Unix installation Guide"},r="Unix Installation Guide for Stirling PDF",a={id:"Installation/Unix Installation",title:"Unix installation Guide",description:"To run the application without Docker/Podman, you will need to manually install all dependencies and build the necessary components.",source:"@site/docs/Installation/Unix.md",sourceDirName:"Installation",slug:"/Installation/Unix Installation",permalink:"/Installation/Unix Installation",draft:!1,unlisted:!1,editUrl:"https://github.com/Stirling-Tools/Stirling-Tools.github.io/tree/main/docs/Installation/Unix.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,id:"Unix Installation",title:"Unix installation Guide"},sidebar:"tutorialSidebar",previous:{title:"Mac installation Guide",permalink:"/Installation/Mac Installation"},next:{title:"Windows Guide",permalink:"/Installation/Windows Installation"}},o={},c=[{value:"Step 1: Prerequisites",id:"step-1-prerequisites",level:3},{value:"Step 2: Clone and Build jbig2enc (Only required for certain OCR functionality)",id:"step-2-clone-and-build-jbig2enc-only-required-for-certain-ocr-functionality",level:3},{value:"Step 3: Install Additional Software",id:"step-3-install-additional-software",level:3},{value:"Step 4: Clone and Build Stirling-PDF",id:"step-4-clone-and-build-stirling-pdf",level:3},{value:"Step 5: Move jar to desired location",id:"step-5-move-jar-to-desired-location",level:3},{value:"Step 6: Other files",id:"step-6-other-files",level:3},{value:"OCR",id:"ocr",level:4},{value:"Installing Language Packs",id:"installing-language-packs",level:5},{value:"Step 7: Run Stirling-PDF",id:"step-7-run-stirling-pdf",level:3},{value:"Step 8: Adding a Desktop icon",id:"step-8-adding-a-desktop-icon",level:3},{value:"Optional: Changing the host and port of the application:",id:"optional-changing-the-host-and-port-of-the-application",level:3},{value:"Optional: Run Stirling-PDF as a service (requires root).",id:"optional-run-stirling-pdf-as-a-service-requires-root",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h3:"h3",h4:"h4",h5:"h5",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.RP)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"unix-installation-guide-for-stirling-pdf",children:"Unix Installation Guide for Stirling PDF"}),"\n",(0,t.jsx)(n.p,{children:"To run the application without Docker/Podman, you will need to manually install all dependencies and build the necessary components."}),"\n",(0,t.jsx)(n.p,{children:"Note that some dependencies might not be available in the standard repositories of all Linux distributions, and may require additional steps to install."}),"\n",(0,t.jsx)(n.p,{children:"The following guide assumes you have a basic understanding of using a command line interface in your operating system."}),"\n",(0,t.jsx)(n.p,{children:"It should work on most Linux distributions and MacOS. For Windows, you might need to use Windows Subsystem for Linux (WSL) for certain steps.\nThe amount of dependencies is to actually reduce overall size, ie installing LibreOffice sub components rather than full LibreOffice package."}),"\n",(0,t.jsx)(n.p,{children:"You could theoretically use a Distrobox/Toolbox, if your Distribution has old or not all Packages. But you might just as well use the Docker Container then."}),"\n",(0,t.jsx)(n.h3,{id:"step-1-prerequisites",children:"Step 1: Prerequisites"}),"\n",(0,t.jsx)(n.p,{children:"Install the following software, if not already installed:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Java 17 or later (21 recommended)"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Gradle 7.0 or later (included within repo so not needed on server)"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Git"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Python 3.8 (with pip)"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Make"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"GCC/G++"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Automake"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Autoconf"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["libtool",(0,t.jsx)(n.a,{href:"/Installation/Windows%20Installation",children:"Windows.md"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"pkg-config"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"zlib1g-dev"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"libleptonica-dev"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"For Debian-based systems, you can use the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt-get update\nsudo apt-get install -y git  automake  autoconf  libtool  libleptonica-dev  pkg-config zlib1g-dev make g++ openjdk-21-jdk python3 python3-pip\n"})}),"\n",(0,t.jsx)(n.p,{children:"For Fedora-based systems use this command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo dnf install -y git automake autoconf libtool leptonica-devel pkg-config zlib-devel make gcc-c++ java-21-openjdk python3 python3-pip\n"})}),"\n",(0,t.jsx)(n.p,{children:"For non-root users with Nix Package Manager, use the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"nix-channel --update\nnix-env -iA nixpkgs.jdk21 nixpkgs.git nixpkgs.python38 nixpkgs.gnumake nixpkgs.libgcc nixpkgs.automake nixpkgs.autoconf nixpkgs.libtool nixpkgs.pkg-config nixpkgs.zlib nixpkgs.leptonica\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-2-clone-and-build-jbig2enc-only-required-for-certain-ocr-functionality",children:"Step 2: Clone and Build jbig2enc (Only required for certain OCR functionality)"}),"\n",(0,t.jsx)(n.p,{children:"For Debian and Fedora, you can build it from source using the following commands:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mkdir ~/.git\ncd ~/.git &&\\\ngit clone https://github.com/agl/jbig2enc.git &&\\\ncd jbig2enc &&\\\n./autogen.sh &&\\\n./configure &&\\\nmake &&\\\nsudo make install\n"})}),"\n",(0,t.jsxs)(n.p,{children:["For Nix, you will face ",(0,t.jsx)(n.code,{children:"Leptonica not detected"}),". Bypass this by installing it directly using the following command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"nix-env -iA nixpkgs.jbig2enc\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-3-install-additional-software",children:"Step 3: Install Additional Software"}),"\n",(0,t.jsx)(n.p,{children:"Next we need to install LibreOffice for conversions, tesseract for OCR, and opencv for pattern recognition functionality."}),"\n",(0,t.jsx)(n.p,{children:"Install the following software:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"libreoffice (libreoffice-core libreoffice-common libreoffice-writer libreoffice-calc libreoffice-impress)"}),"\n",(0,t.jsx)(n.li,{children:"python3-uno"}),"\n",(0,t.jsx)(n.li,{children:"unoconv"}),"\n",(0,t.jsx)(n.li,{children:"pngquant"}),"\n",(0,t.jsx)(n.li,{children:"tesseract"}),"\n",(0,t.jsx)(n.li,{children:"opencv-python-headless"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"For Debian-based systems, you can use the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt-get install -y libreoffice-writer libreoffice-calc libreoffice-impress tesseract\npip3 install uno opencv-python-headless unoconv pngquant WeasyPrint --break-system-packages\n"})}),"\n",(0,t.jsx)(n.p,{children:"For Fedora:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo dnf install -y libreoffice-writer libreoffice-calc libreoffice-impress tesseract\npip3 install uno opencv-python-headless unoconv pngquant WeasyPrint\n"})}),"\n",(0,t.jsx)(n.p,{children:"For Nix:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"nix-env -iA nixpkgs.libreoffice nixpkgs.tesseract nixpkgs.poppler_utils\npip3 install uno opencv-python-headless unoconv pngquant WeasyPrint\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-4-clone-and-build-stirling-pdf",children:"Step 4: Clone and Build Stirling-PDF"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd ~/.git &&\\\ngit clone https://github.com/Stirling-Tools/Stirling-PDF.git &&\\\ncd Stirling-PDF &&\\\nchmod +x ./gradlew &&\\\n./gradlew build\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-5-move-jar-to-desired-location",children:"Step 5: Move jar to desired location"}),"\n",(0,t.jsxs)(n.p,{children:["After the build process, a ",(0,t.jsx)(n.code,{children:".jar"})," file will be generated in the ",(0,t.jsx)(n.code,{children:"build/libs"})," directory.\nYou can move this file to a desired location, for example, ",(0,t.jsx)(n.code,{children:"/opt/Stirling-PDF/"}),".\nYou must also move the Script folder within the Stirling-PDF repo that you have downloaded to this directory.\nThis folder is required for the python scripts using OpenCV."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'sudo mkdir /opt/Stirling-PDF &&\\\nsudo mv ./build/libs/Stirling-PDF-*.jar /opt/Stirling-PDF/ &&\\\nsudo mv scripts /opt/Stirling-PDF/ &&\\\necho "Scripts installed."\n'})}),"\n",(0,t.jsx)(n.p,{children:"For non-root users, you can just keep the jar in the main directory of Stirling-PDF using the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mv ./build/libs/Stirling-PDF-*.jar ./Stirling-PDF-*.jar\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-6-other-files",children:"Step 6: Other files"}),"\n",(0,t.jsx)(n.h4,{id:"ocr",children:"OCR"}),"\n",(0,t.jsx)(n.p,{children:"If you plan to use the OCR (Optical Character Recognition) functionality, you might need to install language packs for Tesseract if running non-english scanning."}),"\n",(0,t.jsx)(n.h5,{id:"installing-language-packs",children:"Installing Language Packs"}),"\n",(0,t.jsx)(n.p,{children:"Easiest is to use the langpacks provided by your repositories. Skip the other steps."}),"\n",(0,t.jsx)(n.p,{children:"Manual:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Download the desired language pack(s) by selecting the ",(0,t.jsx)(n.code,{children:".traineddata"})," file(s) for the language(s) you need."]}),"\n",(0,t.jsxs)(n.li,{children:["Place the ",(0,t.jsx)(n.code,{children:".traineddata"})," files in the Tesseract tessdata directory: ",(0,t.jsx)(n.code,{children:"/usr/share/tessdata"})]}),"\n",(0,t.jsxs)(n.li,{children:["Please view  ",(0,t.jsx)(n.a,{href:"https://tesseract.readthedocs.io/en/latest/installation.html",children:"tesseract install guide"})," for more info."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"IMPORTANT:"})," DO NOT REMOVE EXISTING ",(0,t.jsx)(n.code,{children:"eng.traineddata"}),", IT'S REQUIRED."]}),"\n",(0,t.jsx)(n.p,{children:"Debian based systems, install languages with this command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt update &&\\\n# All languages\n# sudo apt install -y 'tesseract-ocr-*'\n\n# Find languages:\napt search tesseract-ocr-\n\n# View installed languages:\ndpkg-query -W tesseract-ocr- | sed 's/tesseract-ocr-//g'\n"})}),"\n",(0,t.jsx)(n.p,{children:"Fedora:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# All languages\n# sudo dnf install -y tesseract-langpack-*\n\n# Find languages:\ndnf search -C tesseract-langpack-\n\n# View installed languages:\nrpm -qa | grep tesseract-langpack | sed 's/tesseract-langpack-//g'\n"})}),"\n",(0,t.jsx)(n.p,{children:"Nix:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"nix-env -iA nixpkgs.tesseract\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," Nix Package Manager pre-installs almost all the language packs when tesseract is installed."]}),"\n",(0,t.jsx)(n.h3,{id:"step-7-run-stirling-pdf",children:"Step 7: Run Stirling-PDF"}),"\n",(0,t.jsx)(n.p,{children:"Those who have pushed to the root directory, run the following commands:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./gradlew bootRun\nor\njava -jar /opt/Stirling-PDF/Stirling-PDF-*.jar\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Since libreoffice, soffice, and conversion tools have their dbus_tmp_dir set as ",(0,t.jsx)(n.code,{children:'dbus_tmp_dir="/run/user/$(id -u)/libreoffice-dbus"'}),", you might get the following error when using their endpoints:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"[Thread-7] INFO  s.s.SPDF.utils.ProcessExecutor - mkdir: cannot create directory \u2018/run/user/1501\u2019: Permission denied\n"})}),"\n",(0,t.jsx)(n.p,{children:"To resolve this, before starting the Stirling-PDF, you have to set the environment variable to a directory you have write access to by using the following commands:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'mkdir temp\nexport DBUS_SESSION_BUS_ADDRESS="unix:path=./temp"\n./gradlew bootRun\nor\njava -jar ./Stirling-PDF-*.jar\n'})}),"\n",(0,t.jsx)(n.h3,{id:"step-8-adding-a-desktop-icon",children:"Step 8: Adding a Desktop icon"}),"\n",(0,t.jsx)(n.p,{children:"This will add a modified Appstarter to your Appmenu."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"location=$(pwd)/gradlew\nimage=$(pwd)/docs/stirling-transparent.svg\n\ncat > ~/.local/share/applications/Stirling-PDF.desktop <<EOF\n[Desktop Entry]\nName=Stirling PDF;\nGenericName=Launch StirlingPDF and open its WebGUI;\nCategory=Office;\nExec=xdg-open http://localhost:8080 && nohup $location bootRun &;\nIcon=$image;\nKeywords=pdf;\nType=Application;\nNoDisplay=false;\nTerminal=true;\nEOF\n"})}),"\n",(0,t.jsx)(n.p,{children:"Note: Currently the app will run in the background until manually closed."}),"\n",(0,t.jsx)(n.h3,{id:"optional-changing-the-host-and-port-of-the-application",children:"Optional: Changing the host and port of the application:"}),"\n",(0,t.jsxs)(n.p,{children:["To override the default configuration, you can add the following to ",(0,t.jsx)(n.code,{children:"/.git/Stirling-PDF/configs/custom_settings.yml"})," file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"server:\n  host: 0.0.0.0\n  port: 3000\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," This file is created after the first application launch. To have it before that, you can create the directory and add the file yourself."]}),"\n",(0,t.jsx)(n.h3,{id:"optional-run-stirling-pdf-as-a-service-requires-root",children:"Optional: Run Stirling-PDF as a service (requires root)."}),"\n",(0,t.jsx)(n.p,{children:"First create a .env file, where you can store environment variables:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"touch /opt/Stirling-PDF/.env\n"})}),"\n",(0,t.jsx)(n.p,{children:'In this file you can add all variables, one variable per line, as stated in the main readme (for example SYSTEM_DEFAULTLOCALE="de-DE").'}),"\n",(0,t.jsx)(n.p,{children:"Create a new file where we store our service settings and open it with nano editor:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"nano /etc/systemd/system/stirlingpdf.service\n"})}),"\n",(0,t.jsx)(n.p,{children:"Paste this content, make sure to update the filename of the jar-file. Press Ctrl+S and Ctrl+X to save and exit the nano editor:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"[Unit]\nDescription=Stirling-PDF service\nAfter=syslog.target network.target\n\n[Service]\nSuccessExitStatus=143\n\nUser=root\nGroup=root\n\nType=simple\n\nEnvironmentFile=/opt/Stirling-PDF/.env\nWorkingDirectory=/opt/Stirling-PDF\nExecStart=/usr/bin/java -jar Stirling-PDF-0.17.2.jar\nExecStop=/bin/kill -15 $MAINPID\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,t.jsx)(n.p,{children:"Notify systemd that it has to rebuild its internal service database (you have to run this command every time you make a change in the service file):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sudo systemctl daemon-reload\n"})}),"\n",(0,t.jsx)(n.p,{children:"Enable the service to tell the service to start it automatically:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sudo systemctl enable stirlingpdf.service\n"})}),"\n",(0,t.jsx)(n.p,{children:"See the status of the service:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sudo systemctl status stirlingpdf.service\n"})}),"\n",(0,t.jsx)(n.p,{children:"Manually start/stop/restart the service:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sudo systemctl start stirlingpdf.service\nsudo systemctl stop stirlingpdf.service\nsudo systemctl restart stirlingpdf.service\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.p,{children:"Remember to set the necessary environment variables before running the project if you want to customize the application the list can be seen in the main readme."}),"\n",(0,t.jsxs)(n.p,{children:["You can do this in the terminal by using the ",(0,t.jsx)(n.code,{children:"export"})," command or -D argument to java -jar command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'export APP_HOME_NAME="Stirling PDF"\nor\n-DAPP_HOME_NAME="Stirling PDF"\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.RP)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},5680:(e,n,i)=>{i.d(n,{RP:()=>c});var t=i(6540);function s(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function l(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function r(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?l(Object(i),!0).forEach((function(n){s(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function a(e,n){if(null==e)return{};var i,t,s=function(e,n){if(null==e)return{};var i,t,s={},l=Object.keys(e);for(t=0;t<l.length;t++)i=l[t],n.indexOf(i)>=0||(s[i]=e[i]);return s}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)i=l[t],n.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}var o=t.createContext({}),c=function(e){var n=t.useContext(o),i=n;return e&&(i="function"==typeof e?e(n):r(r({},n),e)),i},d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},h=t.forwardRef((function(e,n){var i=e.components,s=e.mdxType,l=e.originalType,o=e.parentName,h=a(e,["components","mdxType","originalType","parentName"]),p=c(i),u=s,g=p["".concat(o,".").concat(u)]||p[u]||d[u]||l;return i?t.createElement(g,r(r({ref:n},h),{},{components:i})):t.createElement(g,r({ref:n},h))}));h.displayName="MDXCreateElement"}}]);