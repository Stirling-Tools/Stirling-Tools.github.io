"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8069],{8002:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>x,frontMatter:()=>d,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"Configuration/SAML SSO Configuration/SAML SSO Configuration","title":"SAML 2.0 Single Sign-On Configuration","description":"Tier: Enterprise","source":"@site/docs/Configuration/SAML SSO Configuration/SAML SSO Configuration.md","sourceDirName":"Configuration/SAML SSO Configuration","slug":"/Configuration/SAML SSO Configuration/","permalink":"/Configuration/SAML SSO Configuration/","draft":false,"unlisted":false,"editUrl":"https://github.com/Stirling-Tools/Stirling-Tools.github.io/tree/main/docs/Configuration/SAML SSO Configuration/SAML SSO Configuration.md","tags":[{"inline":true,"label":"enterprise","permalink":"/tags/enterprise"},{"inline":true,"label":"management","permalink":"/tags/management"},{"inline":true,"label":"feature","permalink":"/tags/feature"},{"inline":true,"label":"advanced feature","permalink":"/tags/advanced-feature"},{"inline":true,"label":"saml","permalink":"/tags/saml"}],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"tags":["enterprise","management","feature","advanced feature","saml"]},"sidebar":"tutorialSidebar","previous":{"title":"Single Sign-On (SSO) Overview","permalink":"/Configuration/Single Sign-On Configuration"},"next":{"title":"UI Customisation","permalink":"/Configuration/UI Customisation"}}');var s=i(4848),t=i(8453),l=i(1470),o=i(9365);const d={sidebar_position:1,tags:["enterprise","management","feature","advanced feature","saml"]},c="SAML 2.0 Single Sign-On Configuration",a={},h=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Setup Guide",id:"setup-guide",level:2},{value:"Step 1: Setup Certificates",id:"step-1-setup-certificates",level:3},{value:"1a. Generate Service Provider (SP) Keypair",id:"1a-generate-service-provider-sp-keypair",level:4},{value:"1b. Download IdP Certificate",id:"1b-download-idp-certificate",level:4},{value:"1c. Place Certificates in Mounted Directory",id:"1c-place-certificates-in-mounted-directory",level:4},{value:"Step 2: Configure Stirling-PDF",id:"step-2-configure-stirling-pdf",level:3},{value:"Additional Configuration: baseUrl for SAML SLO",id:"additional-configuration-baseurl-for-saml-slo",level:4},{value:"Step 3: Configure Your Identity Provider",id:"step-3-configure-your-identity-provider",level:3},{value:"Step 4: Test SAML Login",id:"step-4-test-saml-login",level:3},{value:"Step 5: Promote SAML User to Admin",id:"step-5-promote-saml-user-to-admin",level:3},{value:"Step 6 (Optional): Switch to SSO-Only Mode",id:"step-6-optional-switch-to-sso-only-mode",level:3},{value:"Configuration Reference",id:"configuration-reference",level:2},{value:"Required Properties",id:"required-properties",level:3},{value:"Optional Properties",id:"optional-properties",level:3},{value:"Advanced Configuration",id:"advanced-configuration",level:2},{value:"SAML Attribute Mapping",id:"saml-attribute-mapping",level:3},{value:"Attribute Debugging",id:"attribute-debugging",level:4},{value:"Understanding Registration ID",id:"understanding-registration-id",level:3},{value:"Auto-Login Feature",id:"auto-login-feature",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"&quot;SAML requires Enterprise license&quot;",id:"saml-requires-enterprise-license",level:3},{value:"&quot;Invalid SAML response signature&quot;",id:"invalid-saml-response-signature",level:3},{value:"&quot;ACS URL mismatch&quot;",id:"acs-url-mismatch",level:3},{value:"&quot;File not found: idp-certificate.pem&quot;",id:"file-not-found-idp-certificatepem",level:3},{value:"&quot;Cannot auto-create user&quot;",id:"cannot-auto-create-user",level:3},{value:"&quot;Redirect loop after SAML login&quot;",id:"redirect-loop-after-saml-login",level:3},{value:"&quot;Invalid username&quot; error",id:"invalid-username-error",level:3},{value:"Debug Logging",id:"debug-logging",level:3},{value:"Inspect SAML Assertions",id:"inspect-saml-assertions",level:3},{value:"Known Limitations",id:"known-limitations",level:2},{value:"idpMetadataUri Not Auto-Populating",id:"idpmetadatauri-not-auto-populating",level:3},{value:"See Also",id:"see-also",level:2}];function u(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"saml-20-single-sign-on-configuration",children:"SAML 2.0 Single Sign-On Configuration"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Tier"}),": Enterprise"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Stirling-PDF supports SAML 2.0 Single Sign-On for enterprise deployments. This allows integration with Identity Providers (IdP) like Okta, Azure AD, Google Workspace, OneLogin, Authentik, and others."}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Looking for OAuth 2.0 SSO?"})," See ",(0,s.jsx)(n.a,{href:"/Configuration/OAuth%20SSO%20Configuration",children:"OAuth SSO Configuration"})," (Server tier)."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(n.p,{children:"Before starting, ensure you have:"}),"\n",(0,s.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,s.jsx)(n.strong,{children:"Enterprise license active"})," - SAML requires Enterprise tier"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,s.jsx)(n.strong,{children:"Configs directory mounted"})," - Docker volume mounted (e.g., ",(0,s.jsx)(n.code,{children:"./configs:/configs:ro"}),")"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,s.jsx)(n.strong,{children:"Public backend URL configured"})," - Set ",(0,s.jsx)(n.code,{children:"system.backendUrl"})," to your public backend API URL (often same as frontend, verify ",(0,s.jsx)(n.code,{children:"https://your-domain.com/api/v1/info/status"})," is accessible)"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,s.jsx)(n.strong,{children:"Reverse proxy configured"})," - Nginx/Traefik/Caddy with X-Forwarded-* headers forwarding"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,s.jsx)(n.strong,{children:"Login enabled"})," - ",(0,s.jsx)(n.code,{children:"security.enableLogin: true"})," in settings"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,s.jsx)(n.strong,{children:"Admin account ready"})," - Either existing admin or plan to use ",(0,s.jsx)(n.code,{children:"security.initialLogin"})," credentials"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,s.jsx)(n.strong,{children:"IdP admin access"})," - Access to your SAML Identity Provider (Okta, Azure AD, etc.)"]}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\u26a0\ufe0f ",(0,s.jsx)(n.strong,{children:"License Requirement"}),": SAML 2.0 authentication requires an ",(0,s.jsx)(n.strong,{children:"ENTERPRISE"})," license. Existing users created before SAML was license-gated are grandfathered and can continue using SAML with any license tier."]}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\ud83d\udca1 ",(0,s.jsx)(n.strong,{children:"Tip"}),": Start with ",(0,s.jsx)(n.code,{children:"loginMethod: all"})," during initial setup to allow both username/password and SAML login. This ensures you can always access the admin account if SAML configuration needs adjustment."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"setup-guide",children:"Setup Guide"}),"\n",(0,s.jsx)(n.p,{children:"Follow these steps in order to configure SAML SSO:"}),"\n",(0,s.jsx)(n.h3,{id:"step-1-setup-certificates",children:"Step 1: Setup Certificates"}),"\n",(0,s.jsx)(n.p,{children:"SAML requires 3 certificate files for mutual trust:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Certificate"}),(0,s.jsx)(n.th,{children:"Purpose"}),(0,s.jsx)(n.th,{children:"Action"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"SP Private Key"})}),(0,s.jsx)(n.td,{children:"Sign SAML requests to IdP"}),(0,s.jsx)(n.td,{children:"Generate with OpenSSL"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"SP Certificate"})}),(0,s.jsx)(n.td,{children:"Prove identity to IdP"}),(0,s.jsx)(n.td,{children:"Generate with OpenSSL, upload to IdP"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"IdP Certificate"})}),(0,s.jsx)(n.td,{children:"Verify SAML responses from IdP"}),(0,s.jsx)(n.td,{children:"Download from your IdP"})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"1a-generate-service-provider-sp-keypair",children:"1a. Generate Service Provider (SP) Keypair"}),"\n",(0,s.jsx)(n.p,{children:"Stirling-PDF needs a keypair to sign SAML requests and verify responses."}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\u2139\ufe0f ",(0,s.jsx)(n.strong,{children:"If you don't have a keypair"}),", generate one using OpenSSL:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'openssl req -newkey rsa:2048 -nodes \\\n  -keyout private_key.key \\\n  -x509 -days 365 \\\n  -out certificate.crt \\\n  -subj "/C=US/ST=State/L=City/O=Stirling-PDF/CN=your-domain.com"\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Command explanation:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"rsa:2048"}),": Generates 2048-bit RSA key (secure standard)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-nodes"}),": No passphrase (required for automated systems)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-days 365"}),": Certificate valid for 1 year"]}),"\n",(0,s.jsxs)(n.li,{children:["Creates two files: ",(0,s.jsx)(n.code,{children:"private_key.key"})," (private) and ",(0,s.jsx)(n.code,{children:"certificate.crt"})," (public)"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"If you already have a keypair, ensure you have both the private key and certificate files ready."}),"\n",(0,s.jsx)(n.h4,{id:"1b-download-idp-certificate",children:"1b. Download IdP Certificate"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Go to your IdP admin panel"}),"\n",(0,s.jsx)(n.li,{children:"Find SAML app/provider settings"}),"\n",(0,s.jsx)(n.li,{children:"Download signing certificate (PEM format)"}),"\n",(0,s.jsxs)(n.li,{children:["Save as ",(0,s.jsx)(n.code,{children:"idp-certificate.pem"})]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"1c-place-certificates-in-mounted-directory",children:"1c. Place Certificates in Mounted Directory"}),"\n",(0,s.jsx)(n.p,{children:"Place all 3 certificates inside your mounted configs directory:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"./configs/\n  \u251c\u2500\u2500 private_key.key        \u2190 SP private key (keep secure!)\n  \u251c\u2500\u2500 certificate.crt        \u2190 SP certificate (will upload to IdP)\n  \u2514\u2500\u2500 idp-certificate.pem    \u2190 IdP certificate (downloaded)\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\u26a0\ufe0f ",(0,s.jsx)(n.strong,{children:"Critical"}),": Use absolute paths in configuration: ",(0,s.jsx)(n.code,{children:"/configs/filename.pem"})," (no ",(0,s.jsx)(n.code,{children:"file:"})," or ",(0,s.jsx)(n.code,{children:"classpath:"})," prefix for Docker)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-2-configure-stirling-pdf",children:"Step 2: Configure Stirling-PDF"}),"\n",(0,s.jsx)(n.p,{children:"Configure SAML authentication by providing:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"IdP URLs and certificate"})," - Get these from your Identity Provider (obtained from IdP admin panel)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"SP certificates"})," - Point to the certificate files created in Step 1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Backend URL"})," - Your public backend API URL for SAML callbacks (often same as frontend, e.g., ",(0,s.jsx)(n.code,{children:"https://stirling.example.com"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Login settings"})," - Enable login and set method to ",(0,s.jsx)(n.code,{children:"all"})," (allows both username/password and SAML during setup)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key configuration options:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"autoCreateUser: true"})," - Automatically create user accounts on first SAML login"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"blockRegistration: false"})," - Allow new SAML users (set to ",(0,s.jsx)(n.code,{children:"true"})," to require admin pre-approval)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"registrationId: stirling"})," - Identifier used in SAML URLs (must match across all URLs)"]}),"\n"]}),"\n",(0,s.jsxs)(l.A,{groupId:"config-methods",children:[(0,s.jsxs)(o.A,{value:"settings",label:"settings.yml",children:[(0,s.jsxs)(n.p,{children:["Edit ",(0,s.jsx)(n.code,{children:"/configs/settings.yml"}),":"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"security:\n  enableLogin: true\n  loginMethod: all  # Keep 'all' during initial setup\n\n  saml2:\n    enabled: true\n    autoCreateUser: true\n    blockRegistration: false\n    registrationId: stirling\n\n    # Identity Provider (IdP) URLs (get from your IdP)\n    idpSingleLoginUrl: https://idp.example.com/saml/login\n    idpSingleLogoutUrl: https://idp.example.com/saml/logout\n    idpIssuer: https://idp.example.com/entityid\n    idpCert: /configs/idp-certificate.pem\n\n    # Service Provider (SP) Certificates\n    privateKey: /configs/private_key.key\n    spCert: /configs/certificate.crt\n\n# Required for SAML callback URLs\nsystem:\n  backendUrl: https://stirling.example.com\n"})})]}),(0,s.jsxs)(o.A,{value:"environment",label:"Environment Variables",children:[(0,s.jsxs)(n.p,{children:["Add to your ",(0,s.jsx)(n.code,{children:"docker-compose.yml"})," or Docker run command:"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"environment:\n  SYSTEM_BACKENDURL: https://stirling.example.com\n  SECURITY_ENABLELOGIN: true\n  SECURITY_LOGINMETHOD: all\n  SECURITY_SAML2_ENABLED: true\n  SECURITY_SAML2_AUTOCREATEUSER: true\n  SECURITY_SAML2_BLOCKREGISTRATION: false\n  SECURITY_SAML2_REGISTRATIONID: stirling\n  SECURITY_SAML2_IDPSINGLELOGINURL: https://idp.example.com/saml/login\n  SECURITY_SAML2_IDPSINGLELOGOUTURL: https://idp.example.com/saml/logout\n  SECURITY_SAML2_IDPISSUER: https://idp.example.com/entityid\n  SECURITY_SAML2_IDPCERT: /configs/idp-certificate.pem\n  SECURITY_SAML2_PRIVATEKEY: /configs/private_key.key\n  SECURITY_SAML2_SPCERT: /configs/certificate.crt\n"})})]})]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\ud83d\udca1 ",(0,s.jsx)(n.strong,{children:"Tip"}),": Replace the example URLs (",(0,s.jsx)(n.code,{children:"idp.example.com"}),") with actual values from your Identity Provider."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"additional-configuration-baseurl-for-saml-slo",children:"Additional Configuration: baseUrl for SAML SLO"}),"\n",(0,s.jsxs)(n.p,{children:["For Single Logout (SLO) to work correctly in production, you must also set the ",(0,s.jsx)(n.code,{children:"baseUrl"})," property:"]}),"\n",(0,s.jsxs)(l.A,{groupId:"config-methods",children:[(0,s.jsxs)(o.A,{value:"custom-settings",label:"custom_settings.yml",children:[(0,s.jsxs)(n.p,{children:["Add to ",(0,s.jsx)(n.code,{children:"/configs/custom_settings.yml"}),":"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'baseUrl: "https://your-domain.com"\n'})})]}),(0,s.jsxs)(o.A,{value:"environment",label:"Environment Variables",children:[(0,s.jsx)(n.p,{children:"Add to your Docker Compose environment variables:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'environment:\n  baseUrl: "https://your-domain.com"\n'})})]})]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\u26a0\ufe0f ",(0,s.jsx)(n.strong,{children:"Important"}),": Both ",(0,s.jsx)(n.code,{children:"system.backendUrl"})," and ",(0,s.jsx)(n.code,{children:"baseUrl"})," should be set to your public-facing URL for SAML to work correctly in production."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-3-configure-your-identity-provider",children:"Step 3: Configure Your Identity Provider"}),"\n",(0,s.jsx)(n.p,{children:"Provide your IdP with these Service Provider details:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Entity ID / SP Metadata URL:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"https://your-domain.com/saml2/service-provider-metadata/stirling\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Assertion Consumer Service (ACS) URL:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"https://your-domain.com/login/saml2/sso/stirling\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Single Logout (SLO) URL:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"https://your-domain.com/logout\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\ud83d\udccc ",(0,s.jsx)(n.strong,{children:"Important"}),": Replace ",(0,s.jsx)(n.code,{children:"stirling"})," with your ",(0,s.jsx)(n.code,{children:"registrationId"})," value if you changed it. The registration ID must match in all URLs."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Upload SP Certificate to IdP"})," (Critical Step):"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Open ",(0,s.jsx)(n.code,{children:"certificate.crt"})," (your SP public certificate)"]}),"\n",(0,s.jsx)(n.li,{children:'In your IdP\'s SAML app configuration, find "Verification Certificate" or "SP Certificate" field'}),"\n",(0,s.jsxs)(n.li,{children:["Upload or paste ",(0,s.jsx)(n.code,{children:"certificate.crt"})," contents"]}),"\n",(0,s.jsx)(n.li,{children:"Save IdP configuration"}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Without uploading the SP certificate, your IdP cannot verify requests from Stirling-PDF."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Configure NameID and Attributes:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["NameID format: ",(0,s.jsx)(n.code,{children:"email"})," or ",(0,s.jsx)(n.code,{children:"unspecified"})]}),"\n",(0,s.jsxs)(n.li,{children:["Ensure at least one username attribute is sent: ",(0,s.jsx)(n.code,{children:"username"}),", ",(0,s.jsx)(n.code,{children:"emailaddress"}),", ",(0,s.jsx)(n.code,{children:"name"}),", ",(0,s.jsx)(n.code,{children:"upn"}),", or ",(0,s.jsx)(n.code,{children:"uid"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-4-test-saml-login",children:"Step 4: Test SAML Login"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Open an incognito/private browser window"}),"\n",(0,s.jsxs)(n.li,{children:["Navigate to ",(0,s.jsx)(n.code,{children:"https://your-domain.com"})]}),"\n",(0,s.jsx)(n.li,{children:'Click "Login via Single Sign-On" button'}),"\n",(0,s.jsx)(n.li,{children:"You'll be redirected to your IdP login page"}),"\n",(0,s.jsx)(n.li,{children:"Enter your IdP credentials"}),"\n",(0,s.jsx)(n.li,{children:"You'll be redirected back to Stirling-PDF"}),"\n",(0,s.jsxs)(n.li,{children:["A new user account is automatically created (if ",(0,s.jsx)(n.code,{children:"autoCreateUser: true"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\u26a0\ufe0f ",(0,s.jsx)(n.strong,{children:"If login fails"}),", check application logs for SAML errors. See ",(0,s.jsx)(n.a,{href:"#troubleshooting",children:"Troubleshooting"})," section."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-5-promote-saml-user-to-admin",children:"Step 5: Promote SAML User to Admin"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Log in with your initial admin account (username/password)"}),"\n",(0,s.jsxs)(n.li,{children:["Go to ",(0,s.jsx)(n.strong,{children:"Settings"})," \u2192 ",(0,s.jsx)(n.strong,{children:"User Management"})]}),"\n",(0,s.jsx)(n.li,{children:"Find the SAML user account (created during test login)"}),"\n",(0,s.jsxs)(n.li,{children:["Change ",(0,s.jsx)(n.strong,{children:"Role"})," to ",(0,s.jsx)(n.strong,{children:"Admin"})]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Save"})}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\u26a0\ufe0f ",(0,s.jsx)(n.strong,{children:"Important"}),": Keep at least one SAML user with admin privileges before switching to SSO-only mode."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-6-optional-switch-to-sso-only-mode",children:"Step 6 (Optional): Switch to SSO-Only Mode"}),"\n",(0,s.jsx)(n.p,{children:"Once you've verified SAML works and have a SAML admin user:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"security:\n  loginMethod: saml2  # Disables username/password login\n"})}),"\n",(0,s.jsx)(n.p,{children:"Restart Stirling-PDF."}),"\n",(0,s.jsx)(n.h2,{id:"configuration-reference",children:"Configuration Reference"}),"\n",(0,s.jsx)(n.h3,{id:"required-properties",children:"Required Properties"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Property"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Example"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"security.saml2.enabled"})}),(0,s.jsx)(n.td,{children:"Enable SAML 2 authentication"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"true"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"security.saml2.idpSingleLoginUrl"})}),(0,s.jsx)(n.td,{children:"IdP's Single Sign-On URL"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"https://idp.example.com/sso"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"security.saml2.idpSingleLogoutUrl"})}),(0,s.jsx)(n.td,{children:"IdP's Single Logout URL"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"https://idp.example.com/slo"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"security.saml2.idpIssuer"})}),(0,s.jsx)(n.td,{children:"IdP's Entity ID / Issuer"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"https://idp.example.com"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"security.saml2.idpCert"})}),(0,s.jsx)(n.td,{children:"IdP's signing certificate (PEM format)"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/configs/idp-cert.pem"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"security.saml2.privateKey"})}),(0,s.jsx)(n.td,{children:"Your SP private key"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/configs/private_key.key"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"security.saml2.spCert"})}),(0,s.jsx)(n.td,{children:"Your SP certificate"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"/configs/certificate.crt"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"system.backendUrl"})}),(0,s.jsx)(n.td,{children:"Public HTTPS URL for callbacks"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"https://stirling.example.com"})})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"optional-properties",children:"Optional Properties"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Property"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"security.saml2.autoCreateUser"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"false"})}),(0,s.jsx)(n.td,{children:"Auto-create users on first SAML login"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"security.saml2.blockRegistration"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"false"})}),(0,s.jsx)(n.td,{children:"Block new users (only allow pre-registered)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"security.saml2.registrationId"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"stirling"})}),(0,s.jsx)(n.td,{children:"Registration ID (must match ACS URL path)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"security.saml2.provider"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"null"})}),(0,s.jsx)(n.td,{children:"Optional provider name for logging"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"security.loginMethod"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"all"})}),(0,s.jsxs)(n.td,{children:["Login method: ",(0,s.jsx)(n.code,{children:"all"}),", ",(0,s.jsx)(n.code,{children:"normal"}),", ",(0,s.jsx)(n.code,{children:"oauth2"}),", ",(0,s.jsx)(n.code,{children:"saml2"})]})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"advanced-configuration",children:"Advanced Configuration"}),"\n",(0,s.jsx)(n.h3,{id:"saml-attribute-mapping",children:"SAML Attribute Mapping"}),"\n",(0,s.jsx)(n.p,{children:"Stirling-PDF attempts to determine the username in the following priority order:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"username"})})," attribute"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"emailaddress"})})," attribute (or full URI: ",(0,s.jsx)(n.code,{children:"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"name"})})," attribute (or full URI: ",(0,s.jsx)(n.code,{children:"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"upn"})})," attribute (User Principal Name - often used in Active Directory)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"uid"})})," attribute (Unix user ID)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"NameID"})," from SAML Subject (fallback if no attributes provided)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Minimum requirement:"})," NameID in the SAML Subject (used as fallback identifier)"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Recommended:"})," At least one username attribute from the priority list above"]}),"\n",(0,s.jsx)(n.h4,{id:"attribute-debugging",children:"Attribute Debugging"}),"\n",(0,s.jsx)(n.p,{children:"Enable debug logging to see what attributes your IdP is sending:"}),"\n",(0,s.jsxs)(l.A,{groupId:"config-methods",children:[(0,s.jsxs)(o.A,{value:"custom-settings",label:"custom_settings.yml",children:[(0,s.jsxs)(n.p,{children:["Add to ",(0,s.jsx)(n.code,{children:"/configs/custom_settings.yml"}),":"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"logging:\n  level:\n    stirling.software.proprietary.security.saml2: DEBUG\n"})})]}),(0,s.jsx)(o.A,{value:"environment",label:"Environment Variables",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"LOGGING_LEVEL_STIRLING_SOFTWARE_PROPRIETARY_SECURITY_SAML2=DEBUG\n"})})})]}),"\n",(0,s.jsx)(n.p,{children:"Check logs for:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Extracted SAML Attributes: {username=[john.doe], emailaddress=[john.doe@example.com], ...}\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\ud83d\udca1 ",(0,s.jsx)(n.strong,{children:"Note"}),": Currently, Stirling-PDF only uses attributes for username identification. Other attributes (first name, last name, groups, roles) are extracted but not used."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"understanding-registration-id",children:"Understanding Registration ID"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"registrationId"})," is a critical configuration value that becomes part of your SAML URLs:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"security:\n  saml2:\n    registrationId: stirling  # Default value\n"})}),"\n",(0,s.jsxs)(n.p,{children:["With ",(0,s.jsx)(n.code,{children:"registrationId: stirling"}),", your URLs are:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Metadata: ",(0,s.jsx)(n.code,{children:"https://your-domain.com/saml2/service-provider-metadata/stirling"})]}),"\n",(0,s.jsxs)(n.li,{children:["ACS: ",(0,s.jsx)(n.code,{children:"https://your-domain.com/login/saml2/sso/stirling"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"If you change the registration ID:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"security:\n  saml2:\n    registrationId: mycompany  # Custom value\n"})}),"\n",(0,s.jsx)(n.p,{children:"Your URLs become:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Metadata: ",(0,s.jsx)(n.code,{children:"https://your-domain.com/saml2/service-provider-metadata/mycompany"})]}),"\n",(0,s.jsxs)(n.li,{children:["ACS: ",(0,s.jsx)(n.code,{children:"https://your-domain.com/login/saml2/sso/mycompany"})]}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\u26a0\ufe0f ",(0,s.jsx)(n.strong,{children:"Critical"}),": If you change ",(0,s.jsx)(n.code,{children:"registrationId"})," after configuring your IdP, you must update ALL URLs in your IdP configuration. The registration ID must match exactly in all places, or SAML login will fail."]}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\ud83d\udca1 ",(0,s.jsx)(n.strong,{children:"Recommendation"}),": Keep the default ",(0,s.jsx)(n.code,{children:"stirling"})," value unless you have a specific reason to change it (e.g., running multiple Stirling-PDF instances with the same IdP)."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"auto-login-feature",children:"Auto-Login Feature"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Tier"}),": Enterprise"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Automatically redirect users to SAML login, bypassing the Stirling-PDF login screen:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"premium:\n  proFeatures:\n    SSOAutoLogin: true\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Users accessing Stirling-PDF are immediately redirected to IdP"}),"\n",(0,s.jsxs)(n.li,{children:["After 5 failed attempts (configurable via ",(0,s.jsx)(n.code,{children:"security.loginAttemptCount"}),"), auto-redirect is disabled"]}),"\n",(0,s.jsxs)(n.li,{children:["Users can still manually access ",(0,s.jsx)(n.code,{children:"/login"})," for form login if ",(0,s.jsx)(n.code,{children:"loginMethod: all"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"saml-requires-enterprise-license",children:'"SAML requires Enterprise license"'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": SAML authentication requires Enterprise tier license."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Verify valid Enterprise license is configured"}),"\n",(0,s.jsxs)(n.li,{children:["Check ",(0,s.jsx)(n.code,{children:"premium.enabled=true"})," in settings"]}),"\n",(0,s.jsx)(n.li,{children:"Existing users created before license enforcement are grandfathered"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"invalid-saml-response-signature",children:'"Invalid SAML response signature"'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": IdP certificate mismatch or incorrect format."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Verify ",(0,s.jsx)(n.code,{children:"idpCert"})," file matches certificate from IdP"]}),"\n",(0,s.jsxs)(n.li,{children:["Ensure certificate is in PEM format (starts with ",(0,s.jsx)(n.code,{children:"-----BEGIN CERTIFICATE-----"}),")"]}),"\n",(0,s.jsx)(n.li,{children:"Re-download certificate from IdP"}),"\n",(0,s.jsx)(n.li,{children:"Check certificate hasn't expired"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"acs-url-mismatch",children:'"ACS URL mismatch"'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": Redirect URL doesn't match IdP configuration."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Verify ",(0,s.jsx)(n.code,{children:"SYSTEM_BACKENDURL"})," is set to public HTTPS URL"]}),"\n",(0,s.jsx)(n.li,{children:"Check reverse proxy sends X-Forwarded-Proto, X-Forwarded-Host, X-Forwarded-Port headers"}),"\n",(0,s.jsxs)(n.li,{children:["Ensure ",(0,s.jsx)(n.code,{children:"registrationId"})," matches in both URL and configuration"]}),"\n",(0,s.jsxs)(n.li,{children:["Update ACS URL in IdP to match: ",(0,s.jsx)(n.code,{children:"https://your-domain.com/login/saml2/sso/stirling"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"file-not-found-idp-certificatepem",children:'"File not found: idp-certificate.pem"'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": Certificate file path is incorrect."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Verify file exists at specified path"}),"\n",(0,s.jsx)(n.li,{children:"For Docker: ensure volume is mounted correctly"}),"\n",(0,s.jsxs)(n.li,{children:["Use absolute paths like ",(0,s.jsx)(n.code,{children:"/configs/filename.pem"})," (no ",(0,s.jsx)(n.code,{children:"file:"})," prefix)"]}),"\n",(0,s.jsx)(n.li,{children:"Check file permissions (must be readable by application)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"cannot-auto-create-user",children:'"Cannot auto-create user"'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": User doesn't exist and auto-creation is disabled."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Set ",(0,s.jsx)(n.code,{children:"autoCreateUser: true"})," to allow new users"]}),"\n",(0,s.jsx)(n.li,{children:"Or pre-create user accounts as admin"}),"\n",(0,s.jsx)(n.li,{children:"Check license allows additional users"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"redirect-loop-after-saml-login",children:'"Redirect loop after SAML login"'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": Session or cookie issues."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Clear browser cookies"}),"\n",(0,s.jsxs)(n.li,{children:["Check ",(0,s.jsx)(n.code,{children:"SYSTEM_BACKENDURL"})," matches actual access URL"]}),"\n",(0,s.jsx)(n.li,{children:"Verify cookies are allowed for domain"}),"\n",(0,s.jsx)(n.li,{children:"Ensure SameSite cookie settings are compatible"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"invalid-username-error",children:'"Invalid username" error'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": No valid username found in assertion."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Enable debug logging to see what attributes are received"}),"\n",(0,s.jsxs)(n.li,{children:["Ensure IdP sends at least one of: ",(0,s.jsx)(n.code,{children:"username"}),", ",(0,s.jsx)(n.code,{children:"emailaddress"}),", ",(0,s.jsx)(n.code,{children:"name"}),", ",(0,s.jsx)(n.code,{children:"upn"}),", ",(0,s.jsx)(n.code,{children:"uid"})]}),"\n",(0,s.jsx)(n.li,{children:"Verify NameID is present in SAML Subject as fallback"}),"\n",(0,s.jsx)(n.li,{children:"Check attribute name format (short name vs full URI)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"debug-logging",children:"Debug Logging"}),"\n",(0,s.jsx)(n.p,{children:"Enable SAML debug logging to see detailed authentication flow:"}),"\n",(0,s.jsxs)(l.A,{groupId:"config-methods",children:[(0,s.jsxs)(o.A,{value:"custom-settings",label:"custom_settings.yml",children:[(0,s.jsxs)(n.p,{children:["Add to ",(0,s.jsx)(n.code,{children:"/configs/custom_settings.yml"}),":"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"logging:\n  level:\n    org.springframework.security.saml2: DEBUG\n    org.opensaml: DEBUG\n    stirling.software.proprietary.security: DEBUG\n"})})]}),(0,s.jsx)(o.A,{value:"environment",label:"Environment Variables",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_SECURITY_SAML2=DEBUG\nLOGGING_LEVEL_ORG_OPENSAML=DEBUG\nLOGGING_LEVEL_STIRLING_SOFTWARE_PROPRIETARY_SECURITY=DEBUG\n"})})})]}),"\n",(0,s.jsx)(n.p,{children:"Check logs for SAML attribute information:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Extracted SAML Attributes: {username=[john.doe], emailaddress=[john.doe@example.com], ...}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"inspect-saml-assertions",children:"Inspect SAML Assertions"}),"\n",(0,s.jsx)(n.p,{children:"Use browser developer tools:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Open Network tab"}),"\n",(0,s.jsx)(n.li,{children:"Clear network log"}),"\n",(0,s.jsx)(n.li,{children:"Attempt SAML login"}),"\n",(0,s.jsxs)(n.li,{children:["Look for POST to ",(0,s.jsx)(n.code,{children:"/login/saml2/sso/stirling"})]}),"\n",(0,s.jsx)(n.li,{children:"Decode SAMLResponse parameter (Base64 + inflate)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Tools:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://addons.mozilla.org/en-US/firefox/addon/saml-tracer/",children:"SAML-tracer"})," (Firefox/Chrome extension)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://www.samltool.com/decode.php",children:"SAML Decoder"})," (online tool)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"known-limitations",children:"Known Limitations"}),"\n",(0,s.jsx)(n.h3,{id:"idpmetadatauri-not-auto-populating",children:"idpMetadataUri Not Auto-Populating"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"idpMetadataUri"})," configuration field exists but is ",(0,s.jsx)(n.strong,{children:"not currently used"})," to auto-populate IdP settings. You must manually configure:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"idpSingleLoginUrl"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"idpSingleLogoutUrl"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"idpIssuer"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"idpCert"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Workaround"}),": Manually extract values from IdP metadata XML."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\ud83d\udca1 ",(0,s.jsx)(n.strong,{children:"Note"}),": Auto-populating IdP settings from metadata URI is a planned enhancement coming soon."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/Configuration/OAuth%20SSO%20Configuration",children:"OAuth SSO Configuration"})," - OAuth 2.0 / OIDC setup"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/Configuration/System%20and%20Security",children:"System and Security"})," - Additional security settings"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/Configuration/External%20Database",children:"External Database"})," - User storage configuration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/Paid-Offerings",children:"Paid Offerings"})," - Enterprise tier and licensing information"]}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},9365:(e,n,i)=>{i.d(n,{A:()=>l});i(6540);var r=i(4164);const s={tabItem:"tabItem_Ymn6"};var t=i(4848);function l(e){let{children:n,hidden:i,className:l}=e;return(0,t.jsx)("div",{role:"tabpanel",className:(0,r.A)(s.tabItem,l),hidden:i,children:n})}},1470:(e,n,i)=>{i.d(n,{A:()=>v});var r=i(6540),s=i(4164),t=i(3104),l=i(6347),o=i(205),d=i(7485),c=i(1682),a=i(679);function h(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:i}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return h(e).map((e=>{let{props:{value:n,label:i,attributes:r,default:s}}=e;return{value:n,label:i,attributes:r,default:s}}))}(i);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,i])}function x(e){let{value:n,tabValues:i}=e;return i.some((e=>e.value===n))}function j(e){let{queryString:n=!1,groupId:i}=e;const s=(0,l.W6)(),t=function(e){let{queryString:n=!1,groupId:i}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!i)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return i??null}({queryString:n,groupId:i});return[(0,d.aZ)(t),(0,r.useCallback)((e=>{if(!t)return;const n=new URLSearchParams(s.location.search);n.set(t,e),s.replace({...s.location,search:n.toString()})}),[t,s])]}function p(e){const{defaultValue:n,queryString:i=!1,groupId:s}=e,t=u(e),[l,d]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:i}=e;if(0===i.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!x({value:n,tabValues:i}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${i.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=i.find((e=>e.default))??i[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:t}))),[c,h]=j({queryString:i,groupId:s}),[p,g]=function(e){let{groupId:n}=e;const i=function(e){return e?`docusaurus.tab.${e}`:null}(n),[s,t]=(0,a.Dv)(i);return[s,(0,r.useCallback)((e=>{i&&t.set(e)}),[i,t])]}({groupId:s}),m=(()=>{const e=c??p;return x({value:e,tabValues:t})?e:null})();(0,o.A)((()=>{m&&d(m)}),[m]);return{selectedValue:l,selectValue:(0,r.useCallback)((e=>{if(!x({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);d(e),h(e),g(e)}),[h,g,t]),tabValues:t}}var g=i(2303);const m={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=i(4848);function S(e){let{className:n,block:i,selectedValue:r,selectValue:l,tabValues:o}=e;const d=[],{blockElementScrollPositionUntilNextRender:c}=(0,t.a_)(),a=e=>{const n=e.currentTarget,i=d.indexOf(n),s=o[i].value;s!==r&&(c(n),l(s))},h=e=>{let n=null;switch(e.key){case"Enter":a(e);break;case"ArrowRight":{const i=d.indexOf(e.currentTarget)+1;n=d[i]??d[0];break}case"ArrowLeft":{const i=d.indexOf(e.currentTarget)-1;n=d[i]??d[d.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":i},n),children:o.map((e=>{let{value:n,label:i,attributes:t}=e;return(0,f.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>d.push(e),onKeyDown:h,onClick:a,...t,className:(0,s.A)("tabs__item",m.tabItem,t?.className,{"tabs__item--active":r===n}),children:i??n},n)}))})}function b(e){let{lazy:n,children:i,selectedValue:t}=e;const l=(Array.isArray(i)?i:[i]).filter(Boolean);if(n){const e=l.find((e=>e.props.value===t));return e?(0,r.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:l.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function y(e){const n=p(e);return(0,f.jsxs)("div",{className:(0,s.A)("tabs-container",m.tabList),children:[(0,f.jsx)(S,{...n,...e}),(0,f.jsx)(b,{...n,...e})]})}function v(e){const n=(0,g.A)();return(0,f.jsx)(y,{...e,children:h(e.children)},String(n))}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var r=i(6540);const s={},t=r.createContext(s);function l(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);