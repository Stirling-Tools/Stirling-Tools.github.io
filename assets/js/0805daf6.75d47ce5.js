"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2175],{1106:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"Migration/Breaking-Changes","title":"Breaking Changes in V2","description":"Important changes that may affect your V2 upgrade","source":"@site/docs/Migration/Breaking-Changes.md","sourceDirName":"Migration","slug":"/Migration/Breaking-Changes","permalink":"/Migration/Breaking-Changes","draft":false,"unlisted":false,"editUrl":"https://github.com/Stirling-Tools/Stirling-Tools.github.io/tree/main/docs/Migration/Breaking-Changes.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"id":"Breaking-Changes","title":"Breaking Changes in V2","description":"Important changes that may affect your V2 upgrade"},"sidebar":"tutorialSidebar","previous":{"title":"New Features in V2","permalink":"/Migration/New-Features"},"next":{"title":"Configuration Guide","permalink":"/Configuration"}}');var r=i(4848),t=i(8453);const l={sidebar_position:3,id:"Breaking-Changes",title:"Breaking Changes in V2",description:"Important changes that may affect your V2 upgrade"},a="Breaking Changes in V2",d={},o=[{value:"\u26a0\ufe0f Impact Summary",id:"\ufe0f-impact-summary",level:2},{value:"\ud83c\udfa8 Template Customization System Removed",id:"-template-customization-system-removed",level:2},{value:"What Changed",id:"what-changed",level:3},{value:"Migration Path",id:"migration-path",level:3},{value:"Option 1: Use Built-In Customization (Recommended)",id:"option-1-use-built-in-customization-recommended",level:4},{value:"Option 2: Edit Static Files in Docker",id:"option-2-edit-static-files-in-docker",level:4},{value:"Option 3: Fork the Frontend (Advanced)",id:"option-3-fork-the-frontend-advanced",level:4},{value:"What No Longer Works",id:"what-no-longer-works",level:3},{value:"\u2699\ufe0f UI Settings Moved to In-App Configuration",id:"\ufe0f-ui-settings-moved-to-in-app-configuration",level:2},{value:"What Changed",id:"what-changed-1",level:3},{value:"Why the Change",id:"why-the-change",level:3},{value:"Migration Steps",id:"migration-steps",level:3},{value:"Environment Variables",id:"environment-variables",level:3},{value:"\ud83d\udd10 Session Management Improvements",id:"-session-management-improvements",level:2},{value:"What Changed",id:"what-changed-2",level:3},{value:"Migration",id:"migration",level:3},{value:"Environment Variables",id:"environment-variables-1",level:3},{value:"After Upgrade",id:"after-upgrade",level:3},{value:"\ud83d\udd15 Database Notifications Removed",id:"-database-notifications-removed",level:2},{value:"What Changed",id:"what-changed-3",level:3},{value:"Why Removed",id:"why-removed",level:3},{value:"Migration to Audit Logs",id:"migration-to-audit-logs",level:3},{value:"What You Get Instead",id:"what-you-get-instead",level:3},{value:"\ud83d\udd27 Calibre Custom Path Removed",id:"-calibre-custom-path-removed",level:2},{value:"What Changed",id:"what-changed-4",level:3},{value:"Why Removed",id:"why-removed-1",level:3},{value:"Migration",id:"migration-1",level:3},{value:"Standard Detection Paths",id:"standard-detection-paths",level:3},{value:"\ud83d\udce6 Docker Image Changes",id:"-docker-image-changes",level:2},{value:"Tag Changes",id:"tag-changes",level:3},{value:"Migration",id:"migration-2",level:3},{value:"Backwards Compatibility",id:"backwards-compatibility",level:3},{value:"\ud83c\udf10 API Compatibility",id:"-api-compatibility",level:2},{value:"What Stayed the Same",id:"what-stayed-the-same",level:3},{value:"What Changed",id:"what-changed-5",level:3},{value:"Migration",id:"migration-3",level:3},{value:"\ud83d\uddc4\ufe0f Database Schema",id:"\ufe0f-database-schema",level:2},{value:"What Changed",id:"what-changed-6",level:3},{value:"Migration",id:"migration-4",level:3},{value:"Rollback Considerations",id:"rollback-considerations",level:3},{value:"\ud83d\udcf1 Browser Compatibility",id:"-browser-compatibility",level:2},{value:"Minimum Browser Versions",id:"minimum-browser-versions",level:3},{value:"Why the Change",id:"why-the-change-1",level:3},{value:"If Users Have Old Browsers",id:"if-users-have-old-browsers",level:3},{value:"\ud83d\udd12 Security Changes",id:"-security-changes",level:2},{value:"HTTPS Enforcement",id:"https-enforcement",level:3},{value:"Session Management",id:"session-management",level:3},{value:"\ud83c\udfaf Feature Flag Changes",id:"-feature-flag-changes",level:2},{value:"What Changed",id:"what-changed-7",level:3},{value:"Migration",id:"migration-5",level:3},{value:"\ud83d\udcd6 Documentation Structure",id:"-documentation-structure",level:2},{value:"What Changed",id:"what-changed-8",level:3},{value:"Old Links",id:"old-links",level:3},{value:"\u2705 Pre-Upgrade Checklist",id:"-pre-upgrade-checklist",level:2},{value:"1. Customizations",id:"1-customizations",level:3},{value:"2. Configuration",id:"2-configuration",level:3},{value:"3. Infrastructure",id:"3-infrastructure",level:3},{value:"4. Features",id:"4-features",level:3},{value:"5. API Integrations",id:"5-api-integrations",level:3},{value:"\ud83c\udd98 Troubleshooting",id:"-troubleshooting",level:2},{value:"&quot;Unknown configuration key&quot; warnings",id:"unknown-configuration-key-warnings",level:3},{value:"Custom templates not loading",id:"custom-templates-not-loading",level:3},{value:"Users logged out after upgrade",id:"users-logged-out-after-upgrade",level:3},{value:"API returns 404 for tool",id:"api-returns-404-for-tool",level:3},{value:"App name not showing",id:"app-name-not-showing",level:3},{value:"\ud83d\udd04 Rollback Guide",id:"-rollback-guide",level:2},{value:"1. Stop V2",id:"1-stop-v2",level:3},{value:"2. Restore Database",id:"2-restore-database",level:3},{value:"3. Restore Settings",id:"3-restore-settings",level:3},{value:"4. Start V1",id:"4-start-v1",level:3},{value:"Data Preservation",id:"data-preservation",level:3},{value:"\ud83d\udcda Related Documentation",id:"-related-documentation",level:2},{value:"Summary",id:"summary",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"breaking-changes-in-v2",children:"Breaking Changes in V2"})}),"\n",(0,r.jsx)(n.p,{children:"Most V1 deployments will upgrade smoothly to V2, but there are some important changes you should know about. This page documents breaking changes and how to handle them."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-impact-summary",children:"\u26a0\ufe0f Impact Summary"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Change"}),(0,r.jsx)(n.th,{children:"Impact"}),(0,r.jsx)(n.th,{children:"Action Required"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Template Customization"})}),(0,r.jsx)(n.td,{children:"High"}),(0,r.jsx)(n.td,{children:"Rewrite customizations"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"UI Settings Location"})}),(0,r.jsx)(n.td,{children:"Medium"}),(0,r.jsx)(n.td,{children:"Use in-app settings"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Session Management"})}),(0,r.jsx)(n.td,{children:"Low"}),(0,r.jsx)(n.td,{children:"Update setting names"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Database Notifications"})}),(0,r.jsx)(n.td,{children:"Low"}),(0,r.jsx)(n.td,{children:"Use audit logs instead"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-template-customization-system-removed",children:"\ud83c\udfa8 Template Customization System Removed"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact:"})," HIGH for users who customized UI using ",(0,r.jsx)(n.code,{children:"customFiles/templates/"})]}),"\n",(0,r.jsx)(n.h3,{id:"what-changed",children:"What Changed"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V1 Approach:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"customFiles/\n  \u2514\u2500\u2500 templates/\n      \u251c\u2500\u2500 fragments/\n      \u2502   \u2514\u2500\u2500 navbar.html       # Custom navbar\n      \u2514\u2500\u2500 home.html             # Custom homepage\n"})}),"\n",(0,r.jsx)(n.p,{children:"V1 used server-side template injection with Thymeleaf templates."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"V2 Approach:"}),"\nV2 uses React frontend - server-side template injection no longer possible."]}),"\n",(0,r.jsx)(n.h3,{id:"migration-path",children:"Migration Path"}),"\n",(0,r.jsx)(n.p,{children:"If you customized templates in V1, you have two options:"}),"\n",(0,r.jsx)(n.h4,{id:"option-1-use-built-in-customization-recommended",children:"Option 1: Use Built-In Customization (Recommended)"}),"\n",(0,r.jsx)(n.p,{children:"V2 provides in-app settings for most common customizations:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Available Customizations:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"App name and description"}),"\n",(0,r.jsx)(n.li,{children:"Navbar branding"}),"\n",(0,r.jsx)(n.li,{children:"Logo style (classic/modern)"}),"\n",(0,r.jsx)(n.li,{children:"Custom logo upload"}),"\n",(0,r.jsx)(n.li,{children:"Homepage description"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"How to use:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Enable login: ",(0,r.jsx)(n.code,{children:"SECURITY_ENABLELOGIN=true"})]}),"\n",(0,r.jsx)(n.li,{children:"Log in as admin"}),"\n",(0,r.jsx)(n.li,{children:"Go to Settings \u2192 UI"}),"\n",(0,r.jsx)(n.li,{children:"Configure branding there"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Learn more:"})," ",(0,r.jsx)(n.a,{href:"/Configuration/UI%20Customisation",children:"UI Customisation"})]}),"\n",(0,r.jsx)(n.h4,{id:"option-2-edit-static-files-in-docker",children:"Option 2: Edit Static Files in Docker"}),"\n",(0,r.jsx)(n.p,{children:"For customizations beyond built-in settings, you can mount and edit static files:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Steps:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Mount the ",(0,r.jsx)(n.code,{children:"/customFiles/static/"})," directory in Docker"]}),"\n",(0,r.jsx)(n.li,{children:"Add your custom static files (images, favicons, etc.)"}),"\n",(0,r.jsx)(n.li,{children:"Reference them in your HTML/settings"}),"\n",(0,r.jsx)(n.li,{children:"Restart container to apply changes"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example Docker compose:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"volumes:\n  - ./customFiles:/customFiles:rw\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use cases:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Custom favicon"}),"\n",(0,r.jsx)(n.li,{children:"Custom images/logos"}),"\n",(0,r.jsx)(n.li,{children:"Static assets"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"option-3-fork-the-frontend-advanced",children:"Option 3: Fork the Frontend (Advanced)"}),"\n",(0,r.jsx)(n.p,{children:"For complete UI customization:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Steps:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Fork Stirling-PDF repository"}),"\n",(0,r.jsxs)(n.li,{children:["Modify React components in ",(0,r.jsx)(n.code,{children:"frontend/src/"})]}),"\n",(0,r.jsx)(n.li,{children:"Build custom frontend"}),"\n",(0,r.jsx)(n.li,{children:"Deploy in split mode with custom frontend"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Trade-offs:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Complete control"}),"\n",(0,r.jsx)(n.li,{children:"\u274c Must maintain your fork"}),"\n",(0,r.jsx)(n.li,{children:"\u274c Manual merges for updates"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"what-no-longer-works",children:"What No Longer Works"}),"\n",(0,r.jsxs)(n.p,{children:["These V1 customization patterns are ",(0,r.jsx)(n.strong,{children:"no longer supported:"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'\x3c!-- V1: Inject custom navbar (NO LONGER WORKS) --\x3e\n<div th:replace="fragments/navbar :: navbar"></div>\n\n\x3c!-- V1: Conditional content (NO LONGER WORKS) --\x3e\n<div th:if="${@propertyService.get(\'ui.showAdvanced\')}">\n  Custom content\n</div>\n\n\x3c!-- V1: Server-side variables (NO LONGER WORKS) --\x3e\n<span th:text="${appName}"></span>\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-ui-settings-moved-to-in-app-configuration",children:"\u2699\ufe0f UI Settings Moved to In-App Configuration"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact:"})," MEDIUM - Settings moved, but easy to reconfigure"]}),"\n",(0,r.jsx)(n.h3,{id:"what-changed-1",children:"What Changed"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V1 Configuration:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"ui:\n  appName: 'My PDF Tool'\n  homeDescription: 'Welcome to our PDF service!'\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V2 Configuration:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"ui:\n  appNameNavbar: 'My PDF Tool'  # Still in YAML\n  # appName and homeDescription REMOVED\n  # Configure these in-app instead\n"})}),"\n",(0,r.jsx)(n.h3,{id:"why-the-change",children:"Why the Change"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 No container restart needed"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Visual interface with preview"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Validation prevents errors"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Changes apply immediately"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Role-based access control"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"migration-steps",children:"Migration Steps"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Note your current settings:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# From V1 settings.yml\nui:\n  appName: 'CompanyName PDF'\n  homeDescription: 'Internal document processing'\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Remove from settings.yml:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"ui:\n  appNameNavbar: 'CompanyName PDF'\n  # appName - REMOVE THIS LINE\n  # homeDescription - REMOVE THIS LINE\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Configure in UI:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Enable login: ",(0,r.jsx)(n.code,{children:"SECURITY_ENABLELOGIN=true"})]}),"\n",(0,r.jsx)(n.li,{children:"Start V2"}),"\n",(0,r.jsx)(n.li,{children:"Log in as admin"}),"\n",(0,r.jsx)(n.li,{children:"Go to Settings \u2192 UI"}),"\n",(0,r.jsx)(n.li,{children:"Enter app name and description"}),"\n",(0,r.jsx)(n.li,{children:"Save"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,r.jsxs)(n.p,{children:["These environment variables ",(0,r.jsx)(n.strong,{children:"no longer work"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# V1 (NO LONGER WORKS)\nUI_APPNAME="My PDF Tool"\nUI_HOMEDESCRIPTION="Welcome!"\n\n# V2 (USE IN-APP SETTINGS INSTEAD)\n# Set through UI after logging in\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"UI_APPNAMENAVBAR"})," still works for navbar branding."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-session-management-improvements",children:"\ud83d\udd10 Session Management Improvements"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact:"})," LOW - New session features with simple setting updates"]}),"\n",(0,r.jsx)(n.h3,{id:"what-changed-2",children:"What Changed"}),"\n",(0,r.jsx)(n.p,{children:"Session management enhanced with new JWT-based features and improved settings:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"V1 Setting"}),(0,r.jsx)(n.th,{children:"V2 Setting"}),(0,r.jsx)(n.th,{children:"Change"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"jwt.enabled"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"jwt.persistence"})}),(0,r.jsx)(n.td,{children:"Renamed"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"jwt.keyCleanup"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"jwt.enableKeyCleanup"})}),(0,r.jsx)(n.td,{children:"Renamed"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"jwt.secureCookie"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.em,{children:"(removed)"})}),(0,r.jsx)(n.td,{children:"Always secure now"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.em,{children:"(new)"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"jwt.enableKeyRotation"})}),(0,r.jsx)(n.td,{children:"New feature"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.em,{children:"(new)"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"jwt.keyRetentionDays"})}),(0,r.jsx)(n.td,{children:"New feature"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"migration",children:"Migration"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V1 Configuration:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"security:\n  jwt:\n    enabled: false\n    keyCleanup: false\n    secureCookie: true\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V2 Configuration:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"security:\n  jwt:\n    persistence: true           # was 'enabled'\n    enableKeyCleanup: true      # was 'keyCleanup'\n    enableKeyRotation: true     # NEW\n    keyRetentionDays: 7         # NEW\n    # secureCookie REMOVED\n"})}),"\n",(0,r.jsx)(n.h3,{id:"environment-variables-1",children:"Environment Variables"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V1 (NO LONGER WORKS):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"SECURITY_JWT_ENABLED=false\nSECURITY_JWT_KEYCLEANUP=false\nSECURITY_JWT_SECURECOOKIE=true\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V2 (USE THESE):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"SECURITY_JWT_PERSISTENCE=true\nSECURITY_JWT_ENABLEKEYCLEANUP=true\nSECURITY_JWT_ENABLEKEYROTATION=true\nSECURITY_JWT_KEYRETENTIONDAYS=7\n"})}),"\n",(0,r.jsx)(n.h3,{id:"after-upgrade",children:"After Upgrade"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Expected behavior:"})," Users will be logged out once after upgrade."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Why:"})," Session token format changed with new JWT implementation."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Action:"})," Users just need to log in again. Normal behavior."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Learn more:"})," ",(0,r.jsx)(n.a,{href:"./Settings-Changes#enhanced-jwt-configuration",children:"Settings Changes - JWT Configuration"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-database-notifications-removed",children:"\ud83d\udd15 Database Notifications Removed"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact:"})," LOW - Replaced with better alternative"]}),"\n",(0,r.jsx)(n.h3,{id:"what-changed-3",children:"What Changed"}),"\n",(0,r.jsx)(n.p,{children:"Database backup/import notifications removed."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V1 Configuration (NO LONGER WORKS):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"premium:\n  enterpriseFeatures:\n    databaseNotifications:\n      backups:\n        successful: false\n        failed: false\n      imports:\n        successful: false\n        failed: false\n"})}),"\n",(0,r.jsx)(n.h3,{id:"why-removed",children:"Why Removed"}),"\n",(0,r.jsx)(n.p,{children:"Replaced with comprehensive audit logging system that provides:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"More detailed information"}),"\n",(0,r.jsx)(n.li,{children:"Searchable history"}),"\n",(0,r.jsx)(n.li,{children:"Export capabilities"}),"\n",(0,r.jsx)(n.li,{children:"Better retention policies"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"migration-to-audit-logs",children:"Migration to Audit Logs"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V2 Alternative:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Enable audit logging:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"system:\n  logging:\n    level: INFO\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Monitor logs:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'docker logs stirling-pdf | grep "Database backup"\ndocker logs stirling-pdf | grep "Database import"\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Or use audit log UI:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Log in as admin"}),"\n",(0,r.jsx)(n.li,{children:"Go to Settings \u2192 Audit Logs"}),"\n",(0,r.jsx)(n.li,{children:"Filter by operation type"}),"\n",(0,r.jsx)(n.li,{children:"Export as needed"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"what-you-get-instead",children:"What You Get Instead"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Audit logs provide:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Database operations (backup, import, export)"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 User actions (login, logout, operations)"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Admin actions (settings changes, user management)"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Failed operations with error details"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Search and filter capabilities"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Export to CSV/JSON"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example audit log entry:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "timestamp": "2025-01-15T10:30:00Z",\n  "user": "admin",\n  "action": "database.backup",\n  "status": "success",\n  "details": {\n    "size": "1.2 GB",\n    "duration": "45s",\n    "location": "/backups/db-2025-01-15.sql"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-calibre-custom-path-removed",children:"\ud83d\udd27 Calibre Custom Path Removed"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact:"})," LOW - Auto-detection improved"]}),"\n",(0,r.jsx)(n.h3,{id:"what-changed-4",children:"What Changed"}),"\n",(0,r.jsx)(n.p,{children:"Custom Calibre path no longer needed."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V1 Configuration (NO LONGER WORKS):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"system:\n  customPaths:\n    operations:\n      calibre: '/usr/bin/calibre'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"why-removed-1",children:"Why Removed"}),"\n",(0,r.jsx)(n.p,{children:"V2 has improved path detection:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Automatically finds Calibre in standard locations"}),"\n",(0,r.jsx)(n.li,{children:"Checks multiple common paths"}),"\n",(0,r.jsx)(n.li,{children:"Better error messages if not found"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"migration-1",children:"Migration"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Remove from settings.yml:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"system:\n  customPaths:\n    operations:\n      # calibre: ''  # DELETE THIS LINE\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Verify Calibre is installed:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker exec stirling-pdf which ebook-convert\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"If not found, install in container:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:"# In your Dockerfile\nRUN apt-get update && apt-get install -y calibre\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"standard-detection-paths",children:"Standard Detection Paths"}),"\n",(0,r.jsx)(n.p,{children:"V2 automatically checks:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"/usr/bin/ebook-convert"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"/usr/local/bin/ebook-convert"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ebook-convert"})," (in PATH)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"If Calibre is in any standard location, it will be found automatically."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-docker-image-changes",children:"\ud83d\udce6 Docker Image Changes"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact:"})," LOW - Most users unaffected"]}),"\n",(0,r.jsx)(n.h3,{id:"tag-changes",children:"Tag Changes"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V1 Tags:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"stirlingtools/s-pdf:latest        # OLD NAME\nstirlingtools/s-pdf:0.xx.x\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V2 Tags:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"stirlingtools/stirling-pdf:latest  # NEW NAME\nstirlingtools/stirling-pdf:2.x.x\n"})}),"\n",(0,r.jsx)(n.h3,{id:"migration-2",children:"Migration"}),"\n",(0,r.jsx)(n.p,{children:"Update your docker-compose.yml:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V1:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"services:\n  stirling-pdf:\n    image: stirlingtools/s-pdf:latest  # OLD\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V2:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"services:\n  stirling-pdf:\n    image: stirlingtools/stirling-pdf:latest  # NEW\n"})}),"\n",(0,r.jsx)(n.h3,{id:"backwards-compatibility",children:"Backwards Compatibility"}),"\n",(0,r.jsxs)(n.p,{children:["The old ",(0,r.jsx)(n.code,{children:"s-pdf"})," image is deprecated but still receives updates for now. However, you should migrate to the new image name."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-api-compatibility",children:"\ud83c\udf10 API Compatibility"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact:"})," LOW - Most endpoints unchanged"]}),"\n",(0,r.jsx)(n.h3,{id:"what-stayed-the-same",children:"What Stayed the Same"}),"\n",(0,r.jsx)(n.p,{children:"\u2705 All existing API endpoints work\n\u2705 Request/response formats unchanged\n\u2705 Authentication methods compatible\n\u2705 API keys still valid"}),"\n",(0,r.jsx)(n.h3,{id:"what-changed-5",children:"What Changed"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"New endpoints added:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/api/v1/security/validate-signature"})," - PDF signature validation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/api/v1/misc/remove-cert-sign"})," - Remove certificate signatures"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/api/v1/misc/booklet-imposition"})," - Booklet printing layout"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/api/v1/misc/unlock-pdf-forms"})," - Unlock form fields"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/api/v1/misc/replace-color"})," - Color replacement"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/api/v1/misc/add-attachments"})," - Add file attachments"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/api/v1/misc/edit-toc"})," - Edit table of contents"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Enhanced endpoints:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Better error messages"}),"\n",(0,r.jsx)(n.li,{children:"Consistent error format"}),"\n",(0,r.jsx)(n.li,{children:"Progress tracking for long operations"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"migration-3",children:"Migration"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"No action needed"})," for existing API integrations. New endpoints are additive."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"If using OpenAPI spec:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Download updated spec from ",(0,r.jsx)(n.code,{children:"/v3/api-docs"})]}),"\n",(0,r.jsx)(n.li,{children:"Regenerate client code if needed"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-database-schema",children:"\ud83d\uddc4\ufe0f Database Schema"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact:"})," NONE - Automatic migration"]}),"\n",(0,r.jsx)(n.h3,{id:"what-changed-6",children:"What Changed"}),"\n",(0,r.jsx)(n.p,{children:"Database schema updated to support:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Enhanced audit logging"}),"\n",(0,r.jsx)(n.li,{children:"JWT key rotation"}),"\n",(0,r.jsx)(n.li,{children:"User invitation system"}),"\n",(0,r.jsx)(n.li,{children:"In-app settings storage"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"migration-4",children:"Migration"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Automatic!"})," On first V2 startup:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"V2 detects V1 schema"}),"\n",(0,r.jsx)(n.li,{children:"Runs migration scripts"}),"\n",(0,r.jsx)(n.li,{children:"Updates to V2 schema"}),"\n",(0,r.jsx)(n.li,{children:"All data preserved"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"No manual action needed."})}),"\n",(0,r.jsx)(n.h3,{id:"rollback-considerations",children:"Rollback Considerations"}),"\n",(0,r.jsxs)(n.p,{children:["Database is ",(0,r.jsx)(n.strong,{children:"forward-compatible only"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 V1 \u2192 V2 upgrade: Automatic"}),"\n",(0,r.jsx)(n.li,{children:"\u26a0\ufe0f V2 \u2192 V1 rollback: Database needs manual downgrade"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"If you need to rollback:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Restore database backup from before V2 upgrade"}),"\n",(0,r.jsx)(n.li,{children:"Or use V1-compatible database dump"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Recommendation:"})," Take database backup before upgrading."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-browser-compatibility",children:"\ud83d\udcf1 Browser Compatibility"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact:"})," LOW - Modern browsers required"]}),"\n",(0,r.jsx)(n.h3,{id:"minimum-browser-versions",children:"Minimum Browser Versions"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V2 Requirements:"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Browser"}),(0,r.jsx)(n.th,{children:"Minimum Version"}),(0,r.jsx)(n.th,{children:"Notes"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Chrome"})}),(0,r.jsx)(n.td,{children:"90+"}),(0,r.jsx)(n.td,{children:"Recommended"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Firefox"})}),(0,r.jsx)(n.td,{children:"88+"}),(0,r.jsx)(n.td,{children:"Recommended"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Safari"})}),(0,r.jsx)(n.td,{children:"14+"}),(0,r.jsx)(n.td,{children:"Some limitations"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Edge"})}),(0,r.jsx)(n.td,{children:"90+"}),(0,r.jsx)(n.td,{children:"Chromium-based"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V1 vs V2:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"V1 supported older browsers (IE11, old Safari)"}),"\n",(0,r.jsx)(n.li,{children:"V2 requires modern browsers for IndexedDB, modern JavaScript"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"why-the-change-1",children:"Why the Change"}),"\n",(0,r.jsx)(n.p,{children:"V2 features require modern browser APIs:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"IndexedDB for file storage"}),"\n",(0,r.jsx)(n.li,{children:"ES2020+ JavaScript"}),"\n",(0,r.jsx)(n.li,{children:"Modern CSS features"}),"\n",(0,r.jsx)(n.li,{children:"Web Workers for performance"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"if-users-have-old-browsers",children:"If Users Have Old Browsers"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Options:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Update browser"})," (recommended)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use desktop app"})," (supports older systems)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Stay on V1"})," (still receives security updates)"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-security-changes",children:"\ud83d\udd12 Security Changes"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact:"})," LOW - Generally more secure"]}),"\n",(0,r.jsx)(n.h3,{id:"https-enforcement",children:"HTTPS Enforcement"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"V2 Change:"})," Secure cookies always enabled for production."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V1:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"security:\n  jwt:\n    secureCookie: true  # Configurable\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V2:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# secureCookie removed - always secure in production\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Impact:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 More secure by default"}),"\n",(0,r.jsx)(n.li,{children:"\u26a0\ufe0f Requires HTTPS in production"}),"\n",(0,r.jsx)(n.li,{children:"Development mode (localhost) still works over HTTP"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Migration:"}),"\nIf running in production, ensure HTTPS is configured:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"server:\n  ssl:\n    enabled: true\n    key-store: /path/to/keystore.p12\n    key-store-password: ${SSL_PASSWORD}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"session-management",children:"Session Management"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V2 Changes:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Shorter default session timeout (4 hours \u2192 2 hours)"}),"\n",(0,r.jsx)(n.li,{children:"Better session invalidation"}),"\n",(0,r.jsx)(n.li,{children:"Stricter CORS policies"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"To increase timeout:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"security:\n  sessionTimeout: 14400  # 4 hours in seconds\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-feature-flag-changes",children:"\ud83c\udfaf Feature Flag Changes"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact:"})," LOW - Endpoint customization still works"]}),"\n",(0,r.jsx)(n.h3,{id:"what-changed-7",children:"What Changed"}),"\n",(0,r.jsx)(n.p,{children:"Tool IDs updated for consistency:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Old ID (V1)"}),(0,r.jsx)(n.th,{children:"New ID (V2)"}),(0,r.jsx)(n.th,{children:"Tool Name"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"pdf-organizer"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"reorganize-pages"})}),(0,r.jsx)(n.td,{children:"Reorganize Pages"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sign-forms"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sign"})}),(0,r.jsx)(n.td,{children:"Sign PDF"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"migration-5",children:"Migration"}),"\n",(0,r.jsxs)(n.p,{children:["Update ",(0,r.jsx)(n.code,{children:"settings.yml"})," endpoint customization:"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V1:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"endpoints:\n  toRemove: ['pdf-organizer']\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"V2:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"endpoints:\n  toRemove: ['reorganize-pages']\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Complete tool ID list:"})," ",(0,r.jsx)(n.a,{href:"/Configuration/Endpoint%20or%20Feature%20Customisation",children:"Endpoint Customisation"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-documentation-structure",children:"\ud83d\udcd6 Documentation Structure"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact:"})," NONE - Just informational"]}),"\n",(0,r.jsx)(n.h3,{id:"what-changed-8",children:"What Changed"}),"\n",(0,r.jsx)(n.p,{children:"Documentation reorganized for clarity:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'"V2 Guides" \u2192 "Guides" (current features)'}),"\n",(0,r.jsx)(n.li,{children:'"Migration" section added (V1\u2192V2 transition)'}),"\n",(0,r.jsx)(n.li,{children:"Dedicated pages for super tools"}),"\n",(0,r.jsx)(n.li,{children:"Comprehensive tool reference"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"old-links",children:"Old Links"}),"\n",(0,r.jsx)(n.p,{children:"Documentation has been reorganized:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Guides section contains current features (File Storage, Undo/Redo, Desktop vs Web)"}),"\n",(0,r.jsx)(n.li,{children:"Migration section contains V1\u2192V2 transition information"}),"\n",(0,r.jsx)(n.li,{children:"Individual pages moved to appropriate sections"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-pre-upgrade-checklist",children:"\u2705 Pre-Upgrade Checklist"}),"\n",(0,r.jsx)(n.p,{children:"Before upgrading to V2, verify:"}),"\n",(0,r.jsx)(n.h3,{id:"1-customizations",children:"1. Customizations"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Using custom templates?"})," \u2192 Plan rewrite or use built-in settings"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Custom logo?"})," \u2192 Will work in V2"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-configuration",children:"2. Configuration"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Backup settings.yml"})," before modifying"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Note UI settings"})," (appName, homeDescription)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Update JWT settings"})," (enabled \u2192 persistence)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Remove deprecated sections"})," (database notifications)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-infrastructure",children:"3. Infrastructure"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Backup database"})," before upgrade"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Test in staging"})," environment first"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Verify HTTPS"})," configured for production"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Check browser versions"})," for users"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"4-features",children:"4. Features"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Using database notifications?"})," \u2192 Switch to audit logs"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Custom Calibre path?"})," \u2192 Remove, auto-detection works"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"5-api-integrations",children:"5. API Integrations"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Using deprecated tool IDs?"})," \u2192 Update to new IDs"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Update OpenAPI spec"})," if using generated clients"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"Test API endpoints"})," in staging"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-troubleshooting",children:"\ud83c\udd98 Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"unknown-configuration-key-warnings",children:'"Unknown configuration key" warnings'}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Symptom:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"WARN: Unknown configuration key: premium.proFeatures.googleDrive\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution:"})," Remove deprecated settings from settings.yml. See ",(0,r.jsx)(n.a,{href:"/Migration/Settings-Changes",children:"Settings Changes"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"custom-templates-not-loading",children:"Custom templates not loading"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptom:"})," Custom navbar/homepage not appearing."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution:"})," Template system removed. Use in-app settings or custom CSS instead. See ",(0,r.jsx)(n.a,{href:"#-template-customization-system-removed",children:"Template Customization"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"users-logged-out-after-upgrade",children:"Users logged out after upgrade"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptom:"})," All users need to re-login after V2 upgrade."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution:"})," Expected behavior due to JWT format change. Users just need to log in once."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"api-returns-404-for-tool",children:"API returns 404 for tool"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptom:"})," API call fails with tool not found."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution:"})," Update tool IDs. Example: ",(0,r.jsx)(n.code,{children:"pdf-organizer"})," \u2192 ",(0,r.jsx)(n.code,{children:"reorganize-pages"}),". See ",(0,r.jsx)(n.a,{href:"#-feature-flag-changes",children:"Feature Flag Changes"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"app-name-not-showing",children:"App name not showing"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptom:"})," ",(0,r.jsx)(n.code,{children:"ui.appName"})," in settings.yml not displaying."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution:"})," Setting moved to in-app configuration. Log in as admin, go to Settings \u2192 UI. See ",(0,r.jsx)(n.a,{href:"#%EF%B8%8F-ui-settings-moved-to-in-app-configuration",children:"UI Settings"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-rollback-guide",children:"\ud83d\udd04 Rollback Guide"}),"\n",(0,r.jsx)(n.p,{children:"If you need to return to V1:"}),"\n",(0,r.jsx)(n.h3,{id:"1-stop-v2",children:"1. Stop V2"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker stop stirling-pdf\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-restore-database",children:"2. Restore Database"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Option A: Restore from backup\ndocker exec -i postgres psql -U stirling < backup-before-v2.sql\n\n# Option B: Use existing (database is backward compatible for rollback)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-restore-settings",children:"3. Restore Settings"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Restore V1 settings.yml from backup\ncp settings.yml.v1.backup configs/settings.yml\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-start-v1",children:"4. Start V1"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Update docker-compose.yml\nimage: stirlingtools/stirling-pdf:1.5.0\n\ndocker-compose up -d\n"})}),"\n",(0,r.jsx)(n.h3,{id:"data-preservation",children:"Data Preservation"}),"\n",(0,r.jsx)(n.p,{children:"Your data remains intact:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 User accounts"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 API keys"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Configurations"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Custom files"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-related-documentation",children:"\ud83d\udcda Related Documentation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/Migration/Overview",children:"Migration Overview"})})," - General upgrade guide"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/Migration/New-Features",children:"New Features"})})," - What's new in V2"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/Migration/Settings-Changes",children:"Settings Changes"})})," - Configuration updates"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/FAQ",children:"FAQ"})})," - Common questions"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Breaking changes are minimal:"})}),"\n",(0,r.jsx)(n.p,{children:"\u2705 Most configurations work unchanged\n\u2705 All data migrates automatically\n\u2705 API compatibility maintained\n\u26a0\ufe0f Template customizations need rewrite\n\u26a0\ufe0f UI settings moved to in-app config\n\u26a0\ufe0f JWT settings renamed"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Action required:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Update JWT setting names"}),"\n",(0,r.jsx)(n.li,{children:"Remove deprecated configurations"}),"\n",(0,r.jsx)(n.li,{children:"Reconfigure UI settings in-app"}),"\n",(0,r.jsx)(n.li,{children:"Rewrite template customizations (if any)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Most users can upgrade with minimal changes!"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>a});var s=i(6540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);